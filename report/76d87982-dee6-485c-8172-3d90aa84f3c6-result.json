{"name": "test_login", "status": "broken", "statusDetails": {"message": "TypeError: stat: path should be string, bytes, os.PathLike or integer, not WebDriver", "trace": "self = <testcases.test_login.TestLogin object at 0x0000020FB20B6470>, driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"529b37732d15049d0300077c1b1226fa\")>\n\n    @pytest.mark.login\n    @allure.feature(\"登录\")\n    @allure.description(\"登录\")\n    def test_login(self, driver):\n        \"\"\"使用错误账号登录\"\"\"\n        with allure.step(\"登录\"):\n            LoginPage().login(driver, \"jay\", True)\n            sleep(2)\n>           add_image_2_report(driver, \"登录\")\n\ntestcases\\test_login.py:21: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ncommon\\report_add_images.py:28: in add_image_2_report\n    allure.attach.file(image_path, step_name, allure.attachment_type.PNG)\nD:\\学习\\学习软件\\Python3\\lib\\site-packages\\allure_commons\\_allure.py:203: in file\n    plugin_manager.hook.attach_file(source=source, name=name, attachment_type=attachment_type, extension=extension)\nD:\\学习\\学习软件\\Python3\\lib\\site-packages\\pluggy\\_hooks.py:265: in __call__\n    return self._hookexec(self.name, self.get_hookimpls(), kwargs, firstresult)\nD:\\学习\\学习软件\\Python3\\lib\\site-packages\\pluggy\\_manager.py:80: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\nD:\\学习\\学习软件\\Python3\\lib\\site-packages\\allure_pytest\\listener.py:240: in attach_file\n    self.allure_logger.attach_file(uuid4(), source, name=name, attachment_type=attachment_type, extension=extension)\nD:\\学习\\学习软件\\Python3\\lib\\site-packages\\allure_commons\\reporter.py:160: in attach_file\n    plugin_manager.hook.report_attached_file(source=source, file_name=file_name)\nD:\\学习\\学习软件\\Python3\\lib\\site-packages\\pluggy\\_hooks.py:265: in __call__\n    return self._hookexec(self.name, self.get_hookimpls(), kwargs, firstresult)\nD:\\学习\\学习软件\\Python3\\lib\\site-packages\\pluggy\\_manager.py:80: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\nD:\\学习\\学习软件\\Python3\\lib\\site-packages\\allure_commons\\logger.py:44: in report_attached_file\n    shutil.copy2(source, destination)\nD:\\学习\\学习软件\\Python3\\lib\\shutil.py:434: in copy2\n    copyfile(src, dst, follow_symlinks=follow_symlinks)\nD:\\学习\\学习软件\\Python3\\lib\\shutil.py:233: in copyfile\n    if _samefile(src, dst):\nD:\\学习\\学习软件\\Python3\\lib\\shutil.py:210: in _samefile\n    return os.path.samefile(src, dst)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nf1 = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"529b37732d15049d0300077c1b1226fa\")>, f2 = WindowsPath('D:/harper_autotest/report/d35401f1-73d6-49e4-b52a-d4d550497bd7-attachment.png')\n\n    def samefile(f1, f2):\n        \"\"\"Test whether two pathnames reference the same actual file or directory\n    \n        This is determined by the device number and i-node number and\n        raises an exception if an os.stat() call on either pathname fails.\n        \"\"\"\n>       s1 = os.stat(f1)\nE       TypeError: stat: path should be string, bytes, os.PathLike or integer, not WebDriver\n\nD:\\学习\\学习软件\\Python3\\lib\\genericpath.py:100: TypeError"}, "description": "登录", "steps": [{"name": "登录", "status": "broken", "statusDetails": {"message": "TypeError: stat: path should be string, bytes, os.PathLike or integer, not WebDriver\n", "trace": "  File \"D:\\harper_autotest\\testcases\\test_login.py\", line 21, in test_login\n    add_image_2_report(driver, \"登录\")\n  File \"D:\\harper_autotest\\common\\report_add_images.py\", line 28, in add_image_2_report\n    allure.attach.file(image_path, step_name, allure.attachment_type.PNG)\n  File \"D:\\学习\\学习软件\\Python3\\lib\\site-packages\\allure_commons\\_allure.py\", line 203, in file\n    plugin_manager.hook.attach_file(source=source, name=name, attachment_type=attachment_type, extension=extension)\n  File \"D:\\学习\\学习软件\\Python3\\lib\\site-packages\\pluggy\\_hooks.py\", line 265, in __call__\n    return self._hookexec(self.name, self.get_hookimpls(), kwargs, firstresult)\n  File \"D:\\学习\\学习软件\\Python3\\lib\\site-packages\\pluggy\\_manager.py\", line 80, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"D:\\学习\\学习软件\\Python3\\lib\\site-packages\\pluggy\\_callers.py\", line 60, in _multicall\n    return outcome.get_result()\n  File \"D:\\学习\\学习软件\\Python3\\lib\\site-packages\\pluggy\\_result.py\", line 60, in get_result\n    raise ex[1].with_traceback(ex[2])\n  File \"D:\\学习\\学习软件\\Python3\\lib\\site-packages\\pluggy\\_callers.py\", line 39, in _multicall\n    res = hook_impl.function(*args)\n  File \"D:\\学习\\学习软件\\Python3\\lib\\site-packages\\allure_pytest\\listener.py\", line 240, in attach_file\n    self.allure_logger.attach_file(uuid4(), source, name=name, attachment_type=attachment_type, extension=extension)\n  File \"D:\\学习\\学习软件\\Python3\\lib\\site-packages\\allure_commons\\reporter.py\", line 160, in attach_file\n    plugin_manager.hook.report_attached_file(source=source, file_name=file_name)\n  File \"D:\\学习\\学习软件\\Python3\\lib\\site-packages\\pluggy\\_hooks.py\", line 265, in __call__\n    return self._hookexec(self.name, self.get_hookimpls(), kwargs, firstresult)\n  File \"D:\\学习\\学习软件\\Python3\\lib\\site-packages\\pluggy\\_manager.py\", line 80, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"D:\\学习\\学习软件\\Python3\\lib\\site-packages\\pluggy\\_callers.py\", line 60, in _multicall\n    return outcome.get_result()\n  File \"D:\\学习\\学习软件\\Python3\\lib\\site-packages\\pluggy\\_result.py\", line 60, in get_result\n    raise ex[1].with_traceback(ex[2])\n  File \"D:\\学习\\学习软件\\Python3\\lib\\site-packages\\pluggy\\_callers.py\", line 39, in _multicall\n    res = hook_impl.function(*args)\n  File \"D:\\学习\\学习软件\\Python3\\lib\\site-packages\\allure_commons\\logger.py\", line 44, in report_attached_file\n    shutil.copy2(source, destination)\n  File \"D:\\学习\\学习软件\\Python3\\lib\\shutil.py\", line 434, in copy2\n    copyfile(src, dst, follow_symlinks=follow_symlinks)\n  File \"D:\\学习\\学习软件\\Python3\\lib\\shutil.py\", line 233, in copyfile\n    if _samefile(src, dst):\n  File \"D:\\学习\\学习软件\\Python3\\lib\\shutil.py\", line 210, in _samefile\n    return os.path.samefile(src, dst)\n  File \"D:\\学习\\学习软件\\Python3\\lib\\genericpath.py\", line 100, in samefile\n    s1 = os.stat(f1)\n"}, "attachments": [{"name": "图像验证码", "source": "0e97a0bc-74d7-48b4-bc6d-05b7e5cb03d6-attachment.png", "type": "image/png"}, {"name": "登录", "source": "d35401f1-73d6-49e4-b52a-d4d550497bd7-attachment.png", "type": "image/png"}], "start": 1679565988517, "stop": 1679565998425}], "attachments": [{"name": "失败截图.png", "source": "bf195b81-2601-4337-b100-099b4dbcb711-attachment.png", "type": "image/png"}, {"name": "log", "source": "a415621d-5066-4c2b-a347-8bce7bf12a9b-attachment.txt", "type": "text/plain"}, {"name": "stdout", "source": "4fe21b72-892f-4273-ad54-5e37a24d62dd-attachment.txt", "type": "text/plain"}], "start": 1679565988517, "stop": 1679565998430, "uuid": "784d8e5e-d515-415d-b850-821bd18b7566", "historyId": "e3831f1b5ac36d3ec52faa1d4a22987c", "testCaseId": "93a39feb8eb701231e6c069b76eeac98", "fullName": "testcases.test_login.TestLogin#test_login", "labels": [{"name": "feature", "value": "登录"}, {"name": "tag", "value": "login"}, {"name": "parentSuite", "value": "testcases"}, {"name": "suite", "value": "test_login"}, {"name": "subSuite", "value": "TestLogin"}, {"name": "host", "value": "高小浩的电脑"}, {"name": "thread", "value": "10736-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcases.test_login"}]}